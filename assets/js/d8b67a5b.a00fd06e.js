"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2714],{7914:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>x,frontMatter:()=>t,metadata:()=>c,toc:()=>h});var i=s(4848),d=s(8453);const t={},r="Keycloak",c={id:"Getting Started/Keycloak-Configuration",title:"Keycloak",description:"Introduction",source:"@site/docs/1. Getting Started/5-Keycloak-Configuration.md",sourceDirName:"1. Getting Started",slug:"/Getting Started/Keycloak-Configuration",permalink:"/proven-ai/docs/Getting Started/Keycloak-Configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/ctrl-space-labs/proven-ai/tree/main/provenai-documentation/docs/1. Getting Started/5-Keycloak-Configuration.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Environment Variables",permalink:"/proven-ai/docs/Getting Started/Environment-Variables"},next:{title:"Introduction",permalink:"/proven-ai/docs/ProvenAI - SDK/Getting-Started-SDK"}},l={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Automatic client and realm setup",id:"automatic-client-and-realm-setup",level:2},{value:"Step 1: Automatic client and realm setup with docker-compose build.",id:"step-1-automatic-client-and-realm-setup-with-docker-compose-build",level:3},{value:"Step 2: Log in to keycloak admin console",id:"step-2-log-in-to-keycloak-admin-console",level:3},{value:"Step 3: Create role users",id:"step-3-create-role-users",level:3},{value:"Step 4: Modify Realm Settings",id:"step-4-modify-realm-settings",level:3},{value:"Step 5: Authentication Settings",id:"step-5-authentication-settings",level:3},{value:"Step 6: Keycloak environment variables and application properties",id:"step-6-keycloak-environment-variables-and-application-properties",level:3},{value:"Step 7: Create <code>proven-ai-private-client</code> and users",id:"step-7-create-proven-ai-private-client-and-users",level:3},{value:"Manual keycloak setup",id:"manual-keycloak-setup",level:2},{value:"Step 1: Setup keycloak clients and realm",id:"step-1-setup-keycloak-clients-and-realm",level:3},{value:"Step 2: Create <code>gendox-idp-dev</code> realm",id:"step-2-create-gendox-idp-dev-realm",level:3},{value:"Step 3: Fill in admin user information",id:"step-3-fill-in-admin-user-information",level:3},{value:"Step 4: Configure realm clients",id:"step-4-configure-realm-clients",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"keycloak",children:"Keycloak"}),"\n",(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.keycloak.org/documentation",children:"Keycloak"})," is an open source software product to allow single sign-on with identity and access management. Keycloak supports various protocols such as OpenID, OAuth version 2.0 and SAML and provides features such as user management, two-factor authentication, permissions and roles management, creating token services. The provenAI ecosystem uses keycloak for authentication and authorization, enabling secure access to its services. Configuring Keycloak, can be a complex task due to its wide range of customization options. However, we choose to use Keycloak because of its many benefits, including its support for industry-standard protocols, comprehensive user management, and the secure token-base authentication Additionally, being open-source, Keycloak offers flexibility and cost-effectiveness, making it a powerful tool for identity and access management."]}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["All provenAI services can be set up with docker installation by following the instructions provided ",(0,i.jsx)(n.a,{href:"../Getting%20Started/Installation",children:"here"}),". When the docker-compose for all the services is built and running you can access the keycloak admin console at ",(0,i.jsx)(n.code,{children:"http://localhost:8880/idp"})," or ",(0,i.jsx)(n.code,{children:"https://localhost:8443/idp"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"automatic-client-and-realm-setup",children:"Automatic client and realm setup"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-automatic-client-and-realm-setup-with-docker-compose-build",children:"Step 1: Automatic client and realm setup with docker-compose build."}),"\n",(0,i.jsxs)(n.p,{children:["A script has been developed to create the ",(0,i.jsx)(n.code,{children:"gendox-idp-dev"})," realm and configure all the necessary clients for the provenAI ecosystem. The ",(0,i.jsx)(n.code,{children:"gendox-local-init.sh"})," is responsible for:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Register admin user to keycloak."}),"\n",(0,i.jsx)(n.li,{children:"Logging into Keycloak with admin credentials."}),"\n",(0,i.jsxs)(n.li,{children:["Creating the ",(0,i.jsx)(n.code,{children:"gendox-idp-dev"})," realm."]}),"\n",(0,i.jsx)(n.li,{children:"Creating PKCE and private clients."}),"\n",(0,i.jsxs)(n.li,{children:["Assigning roles to private clients' service accounts.\nIt also executes the ",(0,i.jsx)(n.code,{children:"kcadm.sh"})," that is responsible for:"]}),"\n",(0,i.jsx)(n.li,{children:"Setting the correct java executable."}),"\n",(0,i.jsx)(n.li,{children:"Executing the Keycloak Admin CLI."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["This script is executed by building the docker-compose during the provenAI services installation as described ",(0,i.jsx)(n.a,{href:"../Getting%20Started/Installation",children:"here"})," along with keycloak setup. Once the script is executed a message ",(0,i.jsx)(n.code,{children:"Script execution finished successfully"})," is logged on the terminal."]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-log-in-to-keycloak-admin-console",children:"Step 2: Log in to keycloak admin console"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to the Keycloak admin console at ",(0,i.jsx)(n.code,{children:"http://localhost:8880/idp"})," (or ",(0,i.jsx)(n.code,{children:"https://localhost:8443/idp"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Log in with the admin credentials provided in the ",(0,i.jsx)(n.code,{children:"env.local"})," that contains the docker-compose environment variables. The admin credentials are set with the variables ",(0,i.jsx)(n.code,{children:"KEYCLOAK_ADMIN"})," and ",(0,i.jsx)(n.code,{children:"KEYCLOAK_ADMIN_PASSWORD"})," in ",(0,i.jsx)(n.a,{href:"../Getting%20Started/Environment-Variables#keycloak-configuration",children:"keycloack configuration"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-create-role-users",children:"Step 3: Create role users"}),"\n",(0,i.jsxs)(n.p,{children:["In the section ",(0,i.jsx)(n.strong,{children:"Realm roles"})," create the role ",(0,i.jsx)(n.code,{children:"user"})]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Name *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"This is a role for users"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-modify-realm-settings",children:"Step 4: Modify Realm Settings"}),"\n",(0,i.jsxs)(n.p,{children:["Under the section ",(0,i.jsx)(n.strong,{children:"Realm settings"})," configure the following settings:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"General"}),"\nEnable ",(0,i.jsx)(n.code,{children:"Unmanaged Attributes"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Login"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Login screen customization"})}),(0,i.jsx)(n.td,{children:"User registration"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Forgot password"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Remember me"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Email settings"})}),(0,i.jsx)(n.td,{children:"Email as username"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Login with email"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Duplicate emails"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Verify email"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"User info settings"})}),(0,i.jsx)(n.td,{children:"Edit username"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Email"}),"\nIf you want to enable email verification and other functionalities that require an email address you can configure the email settings below:"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Template"})}),(0,i.jsx)(n.td,{children:"From *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-email-address"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Connection & Authentication"})}),(0,i.jsx)(n.td,{children:"Host *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-smtp-host"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Port"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-smtp-port"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Encryption"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-encryption"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Enable SSL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Enable StartTLS"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Authentication"})}),(0,i.jsx)(n.td,{children:"Enabled"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Theme"}),"\nSelect as login theme ",(0,i.jsx)(n.code,{children:"gendox"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Keys"}),"\nSwitch to Add providers. Add ",(0,i.jsx)(n.code,{children:"hmac-generated"}),":"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Edit provider"})}),(0,i.jsx)(n.td,{children:"Name *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"hmac-generated"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Priority"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"100"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Priority for the provider"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-priority-description"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Algorithm"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HS256"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"key provider",src:s(6702).A+"",width:"1027",height:"728"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Sessions"})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"SSO Session Settings"})}),(0,i.jsx)(n.td,{children:"SSO Session Idle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"12 Hours"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"SSO Session Max"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1 Day"})})]})]})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Tokens"})}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Access Tokens"})}),(0,i.jsx)(n.td,{children:"Access Token Lifespan"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1 Hour"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Access Token Lifespan For Implicit Flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"12 Hours"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Client Login Timeout"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"your-login-timeout"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"tokens",src:s(8865).A+"",width:"1265",height:"456"})}),"\n",(0,i.jsx)(n.h3,{id:"step-5-authentication-settings",children:"Step 5: Authentication Settings"}),"\n",(0,i.jsxs)(n.p,{children:["We need to create a ",(0,i.jsx)(n.code,{children:"Copy of registration"})," flow on flows:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Create Flow"})}),(0,i.jsx)(n.td,{children:"Name *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Copy of registration"})})]})})]}),"\n",(0,i.jsx)(n.p,{children:"Next we need to configure the flows."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Click on registration flow and duplicate it."}),"\n",(0,i.jsxs)(n.li,{children:["On the Copy of registration set ",(0,i.jsx)(n.code,{children:"Terms&Conditions"})," to ",(0,i.jsx)(n.code,{children:"Required"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Under Action select ",(0,i.jsx)(n.code,{children:"Bind flow"}),". Choose as binding type as ",(0,i.jsx)(n.code,{children:"Registration flow"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Switch to ",(0,i.jsx)(n.code,{children:"Keycloak master"})," realm and repeat this process."]}),"\n",(0,i.jsxs)(n.p,{children:["Next switch to ",(0,i.jsx)(n.code,{children:"Required actions"}),". You will need to change the following values:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Terms and Conditions"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Registration",src:s(6772).A+"",width:"1387",height:"728"})}),"\n",(0,i.jsx)(n.h3,{id:"step-6-keycloak-environment-variables-and-application-properties",children:"Step 6: Keycloak environment variables and application properties"}),"\n",(0,i.jsx)(n.p,{children:"AFter configuring keycloak you will need to update the environment variables:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Environment Variable"}),(0,i.jsx)(n.th,{children:"Example value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"KEYCLOAK_CLIENT_ID"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gendox-private-client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"KEYCLOAK_CLIENT_SECRET"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"**********"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"KEYCLOAK_CLIENT_SECRET"})," is found on the ",(0,i.jsx)(n.code,{children:"credentials"})," tab on the ",(0,i.jsx)(n.code,{children:"gendox-private-client"})," client."]}),"\n",(0,i.jsxs)(n.h3,{id:"step-7-create-proven-ai-private-client-and-users",children:["Step 7: Create ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," and users"]}),"\n",(0,i.jsxs)(n.p,{children:["For the interaction between the Gendox and ProvenAI services we must create a user in the database for ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," and, following the steps below:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implement client log in to Keycloak:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8880/idp/realms/gendox-idp-dev/protocol/openid-connect/token" \\\n     -H "Content-Type: application/x-www-form-urlencoded" \\\n     -d "grant_type=client_credentials" \\\n     -d "client_id=proven-ai-private-client" \\\n     -d "client_secret=your-proven-secret"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Get profile to store ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"}),":\nAfter receiving the client token you will get the user profile. This API will register the ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," as a user in the database. Now the client can interact with other services of the provenAI ecosystem."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X GET "http://localhost:8080/gendox/api/v1/profile" \\\n     -H "Authorization: Bearer $PROVEN_AI_PRIVATE_CLIENT_TOKEN"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"PROVEN_AI_PRIVATE_CLIENT_TOKEN"}),": The bearer token received from ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," keycloak client log in."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Change user type to ",(0,i.jsx)(n.code,{children:"GENDOX_SUPER_ADMIN"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Go in the database in ",(0,i.jsx)(n.code,{children:"user"})," table of ",(0,i.jsx)(n.code,{children:"gendox_core"})," schema."]}),"\n",(0,i.jsxs)(n.li,{children:["Find the ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," user. The user has username ",(0,i.jsx)(n.code,{children:"service-account-proven-ai-private-client"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["On ",(0,i.jsx)(n.code,{children:"types"})," table of ",(0,i.jsx)(n.code,{children:"gendox_core"})," find the ",(0,i.jsx)(n.code,{children:"type_id"})," of type ",(0,i.jsx)(n.code,{children:"GENDOX_SUPER_ADMIN"}),". The ",(0,i.jsx)(n.code,{children:"type_id"})," should be 40."]}),"\n",(0,i.jsxs)(n.li,{children:["Change the ",(0,i.jsx)(n.code,{children:"type_id"})," to the id corresponding to type ",(0,i.jsx)(n.code,{children:"GENDOX_SUPER_ADMIN"}),". You can find the id on the ",(0,i.jsx)(n.code,{children:"types"})," table. ."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Repeat this process for ",(0,i.jsx)(n.code,{children:"gendox-private-client"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Implement client log in to Keycloak:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X POST "http://localhost:8880/idp/realms/gendox-idp-dev/protocol/openid-connect/token" \\\n     -H "Content-Type: application/x-www-form-urlencoded" \\\n     -d "grant_type=client_credentials" \\\n     -d "client_id=gendox-private-client" \\\n     -d "client_secret=your-gendox-secret"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Get profile to store ",(0,i.jsx)(n.code,{children:"gendox-private-client"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X GET "http://localhost:8080/gendox/api/v1/profile" \\\n     -H "Authorization: Bearer $GENDOX_PRIVATE_CLIENT_TOKEN"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"GENDOX_PRIVATE_CLIENT_TOKEN"}),": The bearer token received from ",(0,i.jsx)(n.code,{children:"gendox-private-client"})," keycloak client log in."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Change user type to ",(0,i.jsx)(n.code,{children:"SUPER_ADMIN"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"manual-keycloak-setup",children:"Manual keycloak setup"}),"\n",(0,i.jsx)(n.p,{children:"To manually manage the keycloak settings by not executing the script that creates the realm and clients, you would have to execute all the steps of the script provided."}),"\n",(0,i.jsx)(n.h3,{id:"step-1-setup-keycloak-clients-and-realm",children:"Step 1: Setup keycloak clients and realm"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Access the keycloak admin console at ",(0,i.jsx)(n.code,{children:"http://localhost:8880/idp"}),"(or ",(0,i.jsx)(n.code,{children:"https://localhost:8443/idp"}),")."]}),"\n",(0,i.jsx)(n.li,{children:"Create an administrative user. You need to set the username and password for the admin user."}),"\n"]}),"\n",(0,i.jsxs)(n.h3,{id:"step-2-create-gendox-idp-dev-realm",children:["Step 2: Create ",(0,i.jsx)(n.code,{children:"gendox-idp-dev"})," realm"]}),"\n",(0,i.jsxs)(n.p,{children:["Open the Administration Consoler after creating the admin user. There is a default ",(0,i.jsx)(n.code,{children:"master"})," realm created. Click on create realm and enter as name ",(0,i.jsx)(n.code,{children:"gendox-idp-dev"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"keycloak realm",src:s(4870).A+"",width:"1517",height:"673"})}),"\n",(0,i.jsx)(n.h3,{id:"step-3-fill-in-admin-user-information",children:"Step 3: Fill in admin user information"}),"\n",(0,i.jsxs)(n.p,{children:["Switch to ",(0,i.jsx)(n.code,{children:"master"})," real and under the ",(0,i.jsx)(n.code,{children:"Users"})," you will se the admin user. Fill in the email of the user as well as the first and last name of the user."]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-configure-realm-clients",children:"Step 4: Configure realm clients"}),"\n",(0,i.jsxs)(n.p,{children:["Navigate to ",(0,i.jsx)(n.code,{children:"clients"})," to configure clients settings."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create ",(0,i.jsx)(n.code,{children:"gendox-pkce-public-client-local"})," client. Fill in the client information with the following values:"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"General settings"})}),(0,i.jsx)(n.td,{children:"Client ID *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gendox-pkce-public-client-local"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Local Gendox PKCE client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PKCE Public Client for gendox"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Always display in UI"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Access settings"})}),(0,i.jsx)(n.td,{children:"Root URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Home URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Valid redirect URIs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000/*"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Valid post logout redirect URIs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000/login"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Web origins"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Admin URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3000"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Capability config"})}),(0,i.jsx)(n.td,{children:"Client authentication"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authorization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Standard flow"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Direct access grants"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Direct access grants"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Implicit flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"OAuth 2.0 Device Authorization Grant"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["We note here that ",(0,i.jsx)(n.code,{children:"3000"})," is the port for gendox frontend."]}),"\n",(0,i.jsx)(n.p,{children:"We also need to modify the following under advanced settings:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Advanced Settings"})}),(0,i.jsx)(n.td,{children:"Proof Key for Code Exchange Code Challenge Method"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"S256"})})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"client advanced settings",src:s(389).A+"",width:"1302",height:"726"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create ",(0,i.jsx)(n.code,{children:"gendox-private-client"})," client. Fill in the client information with the following values:"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"General settings"})}),(0,i.jsx)(n.td,{children:"Client ID *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gendox-public-client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"gendox-public-client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Public client to use in the frontend!"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Always display in UI"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Access settings"})}),(0,i.jsx)(n.td,{children:"Valid redirect URIs"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Web origins"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Capability config"})}),(0,i.jsx)(n.td,{children:"Client authentication"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authorization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Standard flow"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Direct access grants"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Service accounts roles"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Direct access grants"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Implicit flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"OAuth 2.0 Device Authorization Grant"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"gendox private client",src:s(2957).A+"",width:"1052",height:"562"})}),"\n",(0,i.jsxs)(n.p,{children:["Under the ",(0,i.jsx)(n.code,{children:"Service account roles"})," we need to assign the following roles:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"manage-users"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"impersonation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"view-users"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"query-users"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Service account roles",src:s(8712).A+"",width:"1862",height:"582"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Create ",(0,i.jsx)(n.code,{children:"proven-ai-private-client"})," client. Fill in the client information with the following values:"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"General settings"})}),(0,i.jsx)(n.td,{children:"Client ID *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"proven-ai-private-client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ProvenAI Private Client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Always display in UI"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Access settings"})}),(0,i.jsx)(n.td,{children:"Valid redirect URIs"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Web origins"}),(0,i.jsx)(n.td,{})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Capability config"})}),(0,i.jsx)(n.td,{children:"Client authentication"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authorization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Standard flow"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Direct access grants"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Service accounts roles"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Direct access grants"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Implicit flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"OAuth 2.0 Device Authorization Grant"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Then create the following role under the ",(0,i.jsx)(n.code,{children:"Roles"})," section:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Role name *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"uma_protection"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Under the ",(0,i.jsx)(n.code,{children:"Service account roles"})," we need to assign the following roles:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"manage-users"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"impersonation"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"view-users"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"query-users"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"uma_protection"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:"proven-pkce-public-client-local"})," client. Fill in the client information with the following values:"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"General settings"})}),(0,i.jsx)(n.td,{children:"Client ID *"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"proven-pkce-public-client-local"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Name"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Local Gendox PKCE client"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Description"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"PKCE Public Client for gendox"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Always display in UI"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Access settings"})}),(0,i.jsx)(n.td,{children:"Root URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Home URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Valid redirect URIs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001/*"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Valid post logout redirect URIs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001/login"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Web origins"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Admin URL"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"http://localhost:3001"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Capability config"})}),(0,i.jsx)(n.td,{children:"Client authentication"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authorization"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Standard flow"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Authentication flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Direct access grants"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Direct access grants"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"On"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"Implicit flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{}),(0,i.jsx)(n.td,{children:"OAuth 2.0 Device Authorization Grant"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Off"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["We note here that ",(0,i.jsx)(n.code,{children:"3001"})," is the port for provenAI frontend.\nWe also need to modify the following under advanced settings:"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Category"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Field"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Value"})})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Advanced Settings"})}),(0,i.jsx)(n.td,{children:"Proof Key for Code Exchange Code Challenge Method"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"H256"})})]})})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Keycloak clients",src:s(6730).A+"",width:"1911",height:"706"})}),"\n",(0,i.jsxs)(n.p,{children:["When you configure all the required clients and the realm you will need to execute steps 4-7 as described in ",(0,i.jsx)(n.a,{href:"/proven-ai/docs/Getting%20Started/Keycloak-Configuration#automatic-client-and-realm-setup",children:"Automatic client and realm setup"}),", to complete the keycloak configuration."]})]})}function x(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},389:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/client-advanced-settings-436ac53c4bae17465cb43b7340fe5b29.png"},6730:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/client-db0872d92d8552cd5c21542a48d84df6.png"},2957:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/gendoxclient-d41a73e64bb3d321bfd27ec1da9ec132.png"},6702:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/key-provider-db7df4a5492d672511937fbe2acb78cd.png"},4870:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/keycloak-realm-c06ae3e5cb581fb5f131fdca2d3499a6.png"},6772:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/registration-ecb3fa76baab05eac6f85454a344d916.png"},8712:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/service_account_roles-d04ef836a35e7f74e5c2b696f8c3de5c.png"},8865:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/tokens-84400d8b60e84ac2b86a6545478ac41f.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>c});var i=s(6540);const d={},t=i.createContext(d);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);