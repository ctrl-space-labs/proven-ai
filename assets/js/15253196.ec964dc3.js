"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[1851],{6756:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>a,toc:()=>o});var t=i(4848),r=i(8453);const s={},l=void 0,a={id:"API Documentation/3.3.Agents",title:"3.3.Agents",description:"3.3. Issue Agent Verifiable Credential",source:"@site/docs/3. API Documentation/3.3.Agents.md",sourceDirName:"3. API Documentation",slug:"/API Documentation/3.3.Agents",permalink:"/proven-ai/docs/API Documentation/3.3.Agents",draft:!1,unlisted:!1,editUrl:"https://github.com/ctrl-space-labs/proven-ai/tree/main/provenai-documentation/docs/3. API Documentation/3.3.Agents.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"3.1.Organizations",permalink:"/proven-ai/docs/API Documentation/3.1.Organizations"},next:{title:"Tutorial - Extras",permalink:"/proven-ai/docs/category/tutorial---extras"}},d={},o=[{value:"3.3. Issue Agent Verifiable Credential",id:"33-issue-agent-verifiable-credential",level:2},{value:"Prerequites",id:"prerequites",level:3},{value:"Path Variable",id:"path-variable",level:3},{value:"Response:",id:"response",level:3},{value:"3.3. Authorize Agent in ProvenAI",id:"33-authorize-agent-in-provenai",level:2},{value:"Prerequites",id:"prerequites-1",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Response:",id:"response-1",level:3}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"33-issue-agent-verifiable-credential",children:"3.3. Issue Agent Verifiable Credential"}),"\n",(0,t.jsx)(n.p,{children:"Issue verifiable credential for an agent using the W3C standard. The API provides the signe agent Verifiable credential in JWT format. This is created from the provenAI SDK using the walt.id SDK for credential issuance. Also it gnerates an OID4VC offer URL that can be accepted by any OID compliant wallet to receive credential, using the walt.id Credential Issuance API from the provenAI SDK."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Route:"})," POST ",(0,t.jsx)(n.code,{children:"agents/{id}/credential-offer"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Summary:"})," Get the signed jwt format of the agent VC and its offer url."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"prerequites",children:"Prerequites"}),"\n",(0,t.jsx)(n.p,{children:"Issuer did and key in JWK format. In this context, provenAI is the issuer. These values are passed as environment variables."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Environment Variable"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example Value"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ISSUER_DID"})}),(0,t.jsx)(n.td,{children:"The Decentralized Identifier of the issuer"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"did:example:123456789abcdefghi"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ISSUER_PRIVATE_JWK"})}),(0,t.jsx)(n.td,{children:"The JSON Web Key of the issuer in JWK format"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'{"kty":"EC","crv":"P-256","x":"...","y":"..."}'})})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"path-variable",children:"Path Variable"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"id"}),": String agent ID."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"response",children:"Response:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AgentIdCredential"}),": Java class with fields:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agentId"}),": String agent ID."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"credentialOfferUrl"}),": String credential offer url."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"credentialJwt"}),": Object signed credential jwt."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"33-authorize-agent-in-provenai",children:"3.3. Authorize Agent in ProvenAI"}),"\n",(0,t.jsx)(n.p,{children:"Authorizes an agent in the ProvenAI ecosystem, and returns an authorization token. The agent needs to provide a Verifiable Agent ID Presentation and once the presentation is verified, an authorization token is provided to the agent. To verify the valididty of the VP, the walt.id verifier SDK is used. The VP is chcked against the following policies:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"HolderBindingPolicy: ies that issuer of the Verifiable Presentation (presenter) is also the subject of all Verifiable Credentials contained within."}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["JwtSignaturePolicy",":Verifies"," the signature of the W3C JWT-VC"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["NotBeforeDatePolicy",":erifies"," that the credentials not-before date (for JWT: nbf, if unavailable: iat - 1 min) is correctly exceeded."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["ExpirationDatePolicy",":that"," the credentials expiration date (exp for JWTs) has not been exceeded.\nMore information about the supported policies provided in[]."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Route:"})," POST ",(0,t.jsx)(n.code,{children:"agents/token"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Summary:"})," Authorizes an agent and returns an authorization token."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"prerequites-1",children:"Prerequites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The signed Agent Verifiable Presentation ID JWT."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"grant_type"}),": String grant type to be used. Must be 'vp_token'."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scope"}),": String scope of the request. Must be set to 'openid email'."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"vp_token"}),": String signed agent VP ID in JWT format."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"response-1",children:"Response:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"AccessTokenResponse"}),": Access token response from keycloak."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(6540);const r={},s=t.createContext(r);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);